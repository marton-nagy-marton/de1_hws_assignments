# Documentation for Term Project 1
Course: Data Engineering 1

Program: Business Analytics MS

Author: Márton Nagy

## Introduction

## Data
### Sources
The database has 3 sources:
1. The IMDb Non-Commercial Datasets (7 tables)
   * decription available at: https://developer.imdb.com/non-commercial-datasets/
   * downloaded from: https://datasets.imdbws.com/
   * downloaded on: 2024-10-04
2. Full TMDB Movies Dataset 2024 (1 table)
   * description and download link: https://www.kaggle.com/datasets/asaniczka/tmdb-movies-dataset-2023-930k-movies?resource=download
   * downloaded on: 2024-10-04
3. The-Numbers.com Movie Budgets dataset (1 table)
   * description available at: https://www.the-numbers.com/movie/budgets/all
   * scraped directly from the website by the Python code in the_numbers_scraper.ipnyb file
   * scraped on: 2024-10-04
### Variable description
#### Tables from the IMDb datasets
Variable descriptions taken from the official dataset website: https://developer.imdb.com/non-commercial-datasets/.

`title_basics`:
* `tconst`: alphanumeric unique identifier of the title
* `title_type`: the type/format of the title (e.g. movie, short, tvseries, tvepisode, video, etc.)
* `primary_title`: the more popular title / the title used by the filmmakers on promotional materials at the point of release
* `original_title`: original title, in the original language
* `is_adult`: 0: non-adult title; 1: adult title
* `start_year`: represents the release year of a title. In the case of TV Series, it is the series start year
* `end_year`: TV Series end year, null for all other title types
* `runtime_minutes`: primary runtime of the title, in minutes
* `genres`: includes up to three genres associated with the title

`title_akas`:
* `tconst` – an alphanumeric unique identifier of the title
* `ordering` – a number to uniquely identify rows for a given tconst
* `title` – the localized title
* `region` – the region for this version of the title
* `language` – the language of the title
* `types` – enumerated set of attributes for this alternative title. One or more of the following: "alternative", "dvd", "festival", "tv", "video", "working", "original", "imdbDisplay"
* `attributes` – additional terms to describe this alternative title, not enumerated
* `is_original_title` – 0: not original title; 1: original title

`title_crew`:
* `tconst` – alphanumeric unique identifier of the title
* `directors` – director(s) (nconsts) of the given title
* `writers` – writer(s) (nconsts) of the given title

`title_principals`:
* `tconst` – alphanumeric unique identifier of the title
* `ordering` – a number to uniquely identify rows for a given tconst
* `nconst` – alphanumeric unique identifier of the name/person
* `category` – the category of job that person was in
* `job` – the specific job title if applicable, else null
* `characters` – the name of the character played if applicable, else null

`title_episodes`:
* `tconst` – alphanumeric identifier of episode
* `parent_tconst` – alphanumeric identifier of the parent TV Series
* `season_number` – season number the episode belongs to
* `episode_number` – episode number of the tconst in the TV series

`title_ratings`:
* `tconst` – alphanumeric unique identifier of the title
* `average_rating` – weighted average of all the individual user ratings
* `num_votes` – number of votes the title has received

`name_basics`:
* `nconst` – alphanumeric unique identifier of the name/person
* `primary_name` – name by which the person is most often credited
* `birth_year` – in YYYY format
* `death_year` – in YYYY format if applicable, else null
* `primary_profession` – the top-3 professions of the person
* `known_for_titles` – titles (tconsts) the person is known for

#### Table from the TMDB dataset
Variable descriptions taken from the official dataset website: https://www.kaggle.com/datasets/asaniczka/tmdb-movies-dataset-2023-930k-movies/data.

`tmdb`:
* `id` – unique identifier for each movie
* `title` – title of the movie
* `vote_average` – average vote or rating given by viewers
* `vote_count` – total count of votes received for the movie
* `status` – the status of the movie (e.g., Released, Rumored, Post Production, etc.)
* `release_date` – date when the movie was released
* `revenue` – total revenue generated by the movie in USD
* `runtime` – duration of the movie in minutes
* `adult` – indicates if the movie is suitable only for adult audiences
* `backdrop_path` – URL of the backdrop image for the movie
* `budget` – budget allocated for the movie in USD
* `homepage` – official homepage URL of the movie
* `imdb_id` – IMDb ID (tconst) of the movie
* `original_language` – original language in which the movie was produced
* `original_title` – original title of the movie
* `overview` – brief description or summary of the movie
* `popularity` – popularity score of the movie
* `poster_path` – URL of the movie poster image
* `tagline` – catchphrase or memorable line associated with the movie
* `genres` – list of genres the movie belongs to
* `production_companies` – list of production companies involved in the movie
* `spoken_languages` – list of languages spoken in the movie
* `keywords` – keywords associated with the movie

#### Table from the The-Numbers.com dataset
Variable description compiled by the author.

`the_numbers`:
* `id` – unique identifier of the movie
* `release_date` – date when the movie was released (might be only a year, or year and month)
* `movie` – the title of the movie in English
* `budget` – production budget in USD
* `dom_gross` – domestic gross revenue of the movie in USD
* `worldw_gross` – worldwide gross revenue of the movie in USD

### Data cleaning
Replaced non-breakable spaces in the `the_numbers table`’s source file, as it was causing issues with the `str_to_date()` function.

## OLTP layer
### Database structure
The initial database (that is, the OLTP layer) has 9 tables with structure presented in Figure 1. Note, that the database is clearly not in a normal form (e.g. both the `title_crew` and the `title_episodes` tables contain fields of arrays of `nconsts` and `tconsts`, which would be better in the form of a junction table).

***Figure 1: The initial structure of the `movies` database***

![The initial structure of the movies database, EER graph](/term_project1/assets/OLTP_structure.png)

*Notes: Note that in the OLTP layer, only the tables from the IMDb and TMDB datasets can be connected to each other, as the `the_numbers` table does not have a `tconst` ID field which may be used as a foreign key. We might be tempted to connect this table to the IMDb datasets’ tables by the movie titles – however, this is not a straightforward connection as movies may have various variations of their titles. This is an issue we shall resolve in the ETL pipeline to the data warehouse layer.*
